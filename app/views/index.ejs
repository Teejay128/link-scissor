<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Shortener</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/bootstrap.css">
</head>
<body>
    <!-- One form -->
    <!-- 
        initial stage
        one input field for long url
        second input field for customizations
        qrcode switch(on or off)   
        shorten button (takes it to after clicking stage)  
    -->

    <!-- 
        after clicking
        one input field for long url
        second input field for short url (immutable)
        qrcode button (should bring out modal of the qrcode)
        shorten button (takes user back to initial stage)
    -->
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <!-- Form Section -->
                <div class="card mb-4">
                    <div class="card-body">
                        <h2 class="card-title">Shorten URL</h2>
                        <form action="/scissor" method="POST">
                            <div class="mb-3">
                                <label for="longUrl" class="form-label">Long URL</label>
                                <!-- Change type to text, or do some validation in the backend -->
                                <input type="text" class="form-control" name="longUrl" id="longUrl" placeholder="Enter the long URL" required>
                            </div>
                            <div class="mb-3">
                                <label for="customCode" class="form-label">Custom Code (8 digits max)</label>
                                <input type="text" class="form-control" name="customCode" id="customCode" placeholder="Enter your custom code">
                            </div>
                            <div class="mb-3">
                                <div class="form-check form-switch">
                                    <input type="checkbox" class="form-check-input" id="qrCode">
                                    <label for="qrCode" class="form-check-label">Generate QrCode</label>
                                </div>
                            </div>
                            <input type="submit" class="btn btn-primary" value="Shorten Link">
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <!-- Table Section -->
                <div class="card">
                    <div class="card-body">
                        <h2 class="card-title">Link History</h2>
                        <table class="table table-striped table-hover">
                            <thead class="table-dark">
                                <tr>
                                    <th scope="col">Long URL</th>
                                    <th scope="col">Short URL</th>
                                    <th scope="col">Clicks</th>
                                    <th scope="col">QR Code</th>
                                    <th scope="col">Delete</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Make the links appear in reverse, so newly added appears ontop -->
                                <% urls.forEach((url) => { %>
                                <tr>
                                    <td><%= url.longUrl %></td>
                                    <td><%= url.shortUrl %></td>
                                    <td><%= url.clicks %></td>
                                    <td><img src="/assets/qrCode.png" alt="QR Code" class="img-thumbnail"></td>
                                    <td>
                                        <button class="btn btn-light btn-sm">Copy</button>
                                        <button class="btn btn-danger btn-sm">Scrap</button>
                                    </td>
                                </tr>
                                <% }) %>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Your QR Code</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                <span aria-hidden="true"></span>
              </button>
            </div>
            <div class="modal-body">
              <p>Big image of qr code goes here <p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-primary">Save Image</button>
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

    <script src="/js/main.js"></script>
</body>
</html>